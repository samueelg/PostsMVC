{# src/View/user/form.twig #}
{% extends "layout.twig" %}

{% block content %}
    <h1>{% if user.id %}Editar{% else %}Criar Novo{% endif %} Usuário</h1>

    <form action="/user/create" method="POST">
        <div class="form-group">
            <label for="nome">Nome:</label>
            <input type="text"
                   id="nome"
                   name="nome"
                   required
                   class="form-control"
                   value="{{ user.nome | default('') }}"
                   placeholder="Digite o nome do usuário">
        </div>

        {% if error %}
            <div class="alert alert-danger">
                {{ error }}
            </div>
        {% endif %}

        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Salvar</button>
            <a href="/user" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>

    {% if user.id %}
        <div class="mt-4">
            <h2>Posts do Usuário</h2>
            {% if user.posts is empty %}
                <p>Nenhum post encontrado.</p>
            {% else %}
                <ul class="list-group">
                {% for post in user.posts %}
                    <li class="list-group-item">
                        <h5>{{ post.titulo }}</h5>
                        <p>{{ post.conteudo }}</p>
                        <small class="text-muted">Criado em: {{ post.createdAt|date('d/m/Y H:i') }}</small>
                    </li>
                {% endfor %}
                </ul>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}
